(()=>{"use strict";var r={426:(r,n,e)=>{e.d(n,{Z:()=>o});var t=e(645),i=e.n(t)()((function(r){return r[1]}));i.push([r.id,"body {\r\n  text-transform: uppercase;\r\n  min-width: 900px;\r\n  padding: 0;\r\n  margin: 0;\r\n  display: flex;\r\n  flex-direction: column;\r\n  font-family: marvin, sans-serif;\r\n  color: white;\r\n  background-color: #5d92a3;\r\n}\r\n\r\n.upper-menu {\r\n  display: flex;\r\n  justify-content: center;\r\n  min-height: 100px;\r\n  height: 10vh;\r\n}\r\n\r\n.upper-menu .money2,\r\n.upper-menu .money {\r\n  margin-left: 30px;\r\n  margin-top: 20px;\r\n  align-self: flex-start;\r\n  min-height: 38px;\r\n}\r\n\r\n.upper-menu .money2 img,\r\n.upper-menu .money img {\r\n  max-height: 40px;\r\n  width: auto;\r\n  height: 40%;\r\n}\r\n.progress-bar-wrapper {\r\n  width: 90%;\r\n  height: 26px;\r\n  background: rgb(0, 16, 36);\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(0, 16, 36, 1) 0%,\r\n    rgba(3, 37, 84, 1) 100%\r\n  );\r\n  border-radius: 30px;\r\n}\r\n\r\n.progress-bar {\r\n  box-sizing: border-box;\r\n  border-radius: 24px;\r\n  width: 5%;\r\n  height: 26px;\r\n  border: 1px solid #0d233d;\r\n  background: rgba(42, 163, 0);\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(224, 255, 159, 1) 0%,\r\n    rgba(117, 223, 0, 1) 22%,\r\n    rgba(42, 163, 0, 1) 48%,\r\n    rgba(42, 163, 0, 1) 64%,\r\n    rgba(77, 229, 0, 1) 100%\r\n  );\r\n  align-self: flex-start;\r\n}\r\n\r\n.upper-menu .progress {\r\n  margin-left: 30px;\r\n  background: rgb(10, 38, 75);\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(10, 38, 75, 1) 0%,\r\n    rgba(14, 54, 110, 1) 91%\r\n  );\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  justify-content: center;\r\n  width: 400px;\r\n  height: 76px;\r\n  border-bottom-left-radius: 10px;\r\n  border-bottom-right-radius: 10px;\r\n}\r\n.upper-menu .progress .progress-text {\r\n  padding-bottom: 4px;\r\n  margin: 0;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n  font-size: 1.1rem;\r\n}\r\n\r\n.upper-menu .pause-button {\r\n  margin-left: 30px;\r\n  margin-top: 14px;\r\n  align-self: flex-start;\r\n  height: 60%;\r\n  min-width: 100px;\r\n  min-height: 40px;\r\n  max-height: 60px;\r\n}\r\n\r\n.upper-menu .pause-button img {\r\n  max-width: auto;\r\n  height: 100%;\r\n}\r\n\r\n.game {\r\n  align-content: center;\r\n  justify-content: center;\r\n  display: flex;\r\n}\r\n\r\n.playField {\r\n  cursor: pointer;\r\n  margin: auto;\r\n  margin-left: 10px;\r\n  margin-right: 10px;\r\n  border-radius: 16px;\r\n  background-color: #0d233d;\r\n  box-shadow: inset 0px 0px 4px 2px #173e79, 0px 0px 2px 1px #1a468c,\r\n    0px 0px 4px 6px #5d92a3, 0px 0px 3px 6px #5d92a3, 0px 0px 1px 8px #aee6ee;\r\n  align-self: flex-start;\r\n}\r\n.disabled {\r\n  cursor: default;\r\n  pointer-events: none;\r\n}\r\ncanvas {\r\n  padding: 8px;\r\n  margin: 2px;\r\n  border-radius: 10px;\r\n  background-color: #0d233d;\r\n}\r\n\r\n.info {\r\n  margin-left: 40px;\r\n}\r\n\r\n.lower-info-wrapper {\r\n  width: 260px;\r\n  height: 260px;\r\n  border-radius: 20px;\r\n  box-shadow: 0px 0px 4px 4px #5d92a3, 0px 0px 1px 8px #82ffff;\r\n}\r\n\r\n.lower-info {\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 260px;\r\n  height: 260px;\r\n  border-radius: 20px;\r\n  background-color: #20549a;\r\n  box-shadow: inset 0px 0px 3px 2px #2185ff, 0px 0px 6px 2px #2d5b6b;\r\n}\r\n\r\n.moves-counter-wrapper {\r\n  position: relative;\r\n  align-self: center;\r\n  width: 170px;\r\n  height: 170px;\r\n}\r\n\r\n.moves-counter-wrapper img {\r\n  height: 100%;\r\n  width: auto;\r\n}\r\n\r\n.moves-counter {\r\n  font-size: 2rem;\r\n  padding: 0;\r\n  margin: 0;\r\n  position: absolute;\r\n  top: 50%;\r\n  right: 50%;\r\n  transform: translate(50%, -50%);\r\n}\r\n\r\n.points-counter-wrapper {\r\n  height: 30%;\r\n  width: 80%;\r\n  align-self: center;\r\n  text-align: center;\r\n  background: rgb(8, 29, 57);\r\n  border-radius: 20px;\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(8, 29, 57, 1) 0%,\r\n    rgba(15, 58, 118, 1) 91%\r\n  );\r\n}\r\n\r\n.points-counter-wrapper p {\r\n  margin: 0;\r\n}\r\n\r\n.points-text {\r\n  font-size: 1.5rem;\r\n}\r\n\r\n.points-counter {\r\n  font-size: 2rem;\r\n}\r\n\r\n.upper-info-wrapper {\r\n  display: flex;\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n  width: 183px;\r\n  height: 43px;\r\n  background: rgb(168, 205, 255);\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(168, 205, 255, 1) 0%,\r\n    rgba(47, 83, 129, 1) 100%\r\n  );\r\n  margin: auto;\r\n  margin-bottom: 6px;\r\n}\r\n\r\n.upper-info {\r\n  align-self: flex-end;\r\n  border-top-left-radius: 20px;\r\n  border-top-right-radius: 20px;\r\n  border: 3px transparent;\r\n  background: rgb(69, 212, 252);\r\n  background: linear-gradient(\r\n    180deg,\r\n    rgba(69, 212, 252, 1) 0%,\r\n    rgba(34, 88, 161, 1) 37%,\r\n    rgba(15, 57, 113, 1) 100%\r\n  );\r\n  text-align: center;\r\n  width: 180px;\r\n  height: 40px;\r\n  margin: auto;\r\n}\r\n.upper-info p {\r\n  margin-top: 10px;\r\n}\r\n\r\nspan {\r\n  display: none;\r\n  position: fixed;\r\n}\r\n\r\n.status-info-wrapper {\r\n  margin-top: 40px;\r\n  width: 260px;\r\n  height: 100px;\r\n  border-radius: 20px;\r\n  box-shadow: 0px 0px 4px 4px #5d92a3, 0px 0px 1px 8px #82ffff;\r\n}\r\n\r\n.status-info {\r\n  box-sizing: border-box;\r\n  display: flex;\r\n  flex-direction: column;\r\n  width: 260px;\r\n  height: 100px;\r\n  border-radius: 20px;\r\n  background-color: #20549a;\r\n  box-shadow: inset 0px 0px 3px 2px #2185ff, 0px 0px 6px 2px #2d5b6b;\r\n}\r\n\r\n.status-text {\r\n  font-size: 2rem;\r\n  align-self: center;\r\n}\r\n\r\n.bad-glow {\r\n  animation-name: badGlowKeyframes;\r\n  animation-duration: 4s;\r\n}\r\n\r\n@keyframes badGlowKeyframes {\r\n  50% {\r\n    box-shadow: 0px 0px 4px 4px #5d92a3, 0px 0px 1px 8px #82ffff,\r\n      0px 0px 16px 14px rgb(231, 42, 42);\r\n  }\r\n}\r\n\r\n.good-glow {\r\n  animation-name: goodGlowKeyframes;\r\n  animation-duration: 4s;\r\n}\r\n\r\n@keyframes goodGlowKeyframes {\r\n  50% {\r\n    box-shadow: 0px 0px 4px 4px #5d92a3, 0px 0px 1px 8px #82ffff,\r\n      0px 0px 16px 14px rgb(86, 195, 86);\r\n  }\r\n}\r\n\r\n.shuffle-booster, .reset {\r\n  cursor: pointer;\r\n  display: flex;\r\n  justify-content: center;\r\n  align-content: center;\r\n  border-radius: 20px;\r\n  width: 180px;\r\n  height: 60px;\r\n  margin: auto;\r\n  margin-top: 20px;\r\n  background: rgb(254,139,216);\r\n  background: linear-gradient(180deg, rgb(255, 160, 223) 0%, rgb(192, 38, 108) 50%, rgba(188,9,91,1) 100%);\r\n}\r\n\r\n.shuffle-disabled {\r\n  cursor: default;\r\n  pointer-events: none;\r\n  background: grey;\r\n  background: linear-gradient(180deg, rgb(214, 214, 214) 0%, rgb(112, 112, 112) 50%, rgb(93, 93, 93) 100%);\r\n}\r\n\r\n.reset {\r\n  margin-top: 30px;\r\n  width: 200px;\r\n}",""]);const o=i},645:r=>{r.exports=function(r){var n=[];return n.toString=function(){return this.map((function(n){var e=r(n);return n[2]?"@media ".concat(n[2]," {").concat(e,"}"):e})).join("")},n.i=function(r,e,t){"string"==typeof r&&(r=[[null,r,""]]);var i={};if(t)for(var o=0;o<this.length;o++){var s=this[o][0];null!=s&&(i[s]=!0)}for(var a=0;a<r.length;a++){var l=[].concat(r[a]);t&&i[l[0]]||(e&&(l[2]?l[2]="".concat(e," and ").concat(l[2]):l[2]=e),n.push(l))}},n}},379:(r,n,e)=>{var t,i=function(){var r={};return function(n){if(void 0===r[n]){var e=document.querySelector(n);if(window.HTMLIFrameElement&&e instanceof window.HTMLIFrameElement)try{e=e.contentDocument.head}catch(r){e=null}r[n]=e}return r[n]}}(),o=[];function s(r){for(var n=-1,e=0;e<o.length;e++)if(o[e].identifier===r){n=e;break}return n}function a(r,n){for(var e={},t=[],i=0;i<r.length;i++){var a=r[i],l=n.base?a[0]+n.base:a[0],p=e[l]||0,h="".concat(l," ").concat(p);e[l]=p+1;var d=s(h),c={css:a[1],media:a[2],sourceMap:a[3]};-1!==d?(o[d].references++,o[d].updater(c)):o.push({identifier:h,updater:f(c,n),references:1}),t.push(h)}return t}function l(r){var n=document.createElement("style"),t=r.attributes||{};if(void 0===t.nonce){var o=e.nc;o&&(t.nonce=o)}if(Object.keys(t).forEach((function(r){n.setAttribute(r,t[r])})),"function"==typeof r.insert)r.insert(n);else{var s=i(r.insert||"head");if(!s)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");s.appendChild(n)}return n}var p,h=(p=[],function(r,n){return p[r]=n,p.filter(Boolean).join("\n")});function d(r,n,e,t){var i=e?"":t.media?"@media ".concat(t.media," {").concat(t.css,"}"):t.css;if(r.styleSheet)r.styleSheet.cssText=h(n,i);else{var o=document.createTextNode(i),s=r.childNodes;s[n]&&r.removeChild(s[n]),s.length?r.insertBefore(o,s[n]):r.appendChild(o)}}function c(r,n,e){var t=e.css,i=e.media,o=e.sourceMap;if(i?r.setAttribute("media",i):r.removeAttribute("media"),o&&"undefined"!=typeof btoa&&(t+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),r.styleSheet)r.styleSheet.cssText=t;else{for(;r.firstChild;)r.removeChild(r.firstChild);r.appendChild(document.createTextNode(t))}}var u=null,g=0;function f(r,n){var e,t,i;if(n.singleton){var o=g++;e=u||(u=l(n)),t=d.bind(null,e,o,!1),i=d.bind(null,e,o,!0)}else e=l(n),t=c.bind(null,e,n),i=function(){!function(r){if(null===r.parentNode)return!1;r.parentNode.removeChild(r)}(e)};return t(r),function(n){if(n){if(n.css===r.css&&n.media===r.media&&n.sourceMap===r.sourceMap)return;t(r=n)}else i()}}r.exports=function(r,n){(n=n||{}).singleton||"boolean"==typeof n.singleton||(n.singleton=(void 0===t&&(t=Boolean(window&&document&&document.all&&!window.atob)),t));var e=a(r=r||[],n);return function(r){if(r=r||[],"[object Array]"===Object.prototype.toString.call(r)){for(var t=0;t<e.length;t++){var i=s(e[t]);o[i].references--}for(var l=a(r,n),p=0;p<e.length;p++){var h=s(e[p]);0===o[h].references&&(o[h].updater(),o.splice(h,1))}e=l}}}},322:(r,n,e)=>{r.exports=e.p+"47ca1586f508532181a3.png"},903:(r,n,e)=>{r.exports=e.p+"337424e08cec69a7a3ec.png"},73:(r,n,e)=>{r.exports=e.p+"fef5ea20079ea3b6164e.png"},197:(r,n,e)=>{r.exports=e.p+"9bc0e917cc710a6c87d7.png"},646:(r,n,e)=>{r.exports=e.p+"956af920213bfe210baf.png"}},n={};function e(t){var i=n[t];if(void 0!==i)return i.exports;var o=n[t]={id:t,exports:{}};return r[t](o,o.exports,e),o.exports}e.n=r=>{var n=r&&r.__esModule?()=>r.default:()=>r;return e.d(n,{a:n}),n},e.d=(r,n)=>{for(var t in n)e.o(n,t)&&!e.o(r,t)&&Object.defineProperty(r,t,{enumerable:!0,get:n[t]})},e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),e.o=(r,n)=>Object.prototype.hasOwnProperty.call(r,n),(()=>{var r;e.g.importScripts&&(r=e.g.location+"");var n=e.g.document;if(!r&&n&&(n.currentScript&&(r=n.currentScript.src),!r)){var t=n.getElementsByTagName("script");t.length&&(r=t[t.length-1].src)}if(!r)throw new Error("Automatic publicPath is not supported in this browser");r=r.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=r})(),(()=>{var r=e(322),n=e(903),t=e(73),i=e(197),o=e(646),s=e(379),a=e.n(s),l=e(426);a()(l.Z,{insert:"head",singleton:!1}),l.Z.locals;let p=document.getElementById("canvas"),h=p.getContext("2d"),d=0,c=62.5;p.width=500,p.height=500;let u=320,g=6,f=0,x=0,m=new Image;m.src=r;let b=new Image;b.src=n;let w=new Image;w.src=t;let y=new Image;y.src=i;let v=new Image;v.src=o;let C=[m,b,w,y,v];C=C.slice(0,5);var L=[];let k=document.querySelector(".shuffle-booster"),T=document.querySelector(".playField"),M=document.querySelector(".points-counter"),S=document.querySelector(".moves-counter"),R=document.querySelector(".progress-bar"),q=document.querySelector(".status-text"),Y=document.querySelector(".status-info-wrapper"),j=document.querySelector(".reset");M.innerHTML=f,S.innerHTML=g;class A{constructor(r,n,e,t,i,o,s){this.x=r,this.y=n,this.width=e,this.height=t,this.fillColor=i,this.row=o,this.col=s,this.pY=this.y,this.pX=this.x,this.animationStep=(this.y-this.pY)/10}draw(){h.drawImage(C[this.fillColor],this.x,this.y,this.height,this.width)}delete(){this.fillColor=null,this.width=c,this.height=c,this.pX=this.x,this.pY=this.y,h.clearRect(this.x,this.y,this.width,this.height)}compress(){this.height>1?(h.clearRect(this.x,this.y,c,c),this.height-=6.25,this.width-=6.25,this.pX+=3.125,this.pY+=3.125,h.drawImage(C[this.fillColor],this.pX,this.pY,this.height,this.width)):h.clearRect(this.x,this.y,this.width,this.height)}getYPosition(){return[this.pY,this.y]}setPosition(r,n){this.col=n,this.row=r,this.x=this.col*c,this.y=this.row*c,this.pY=this.y,this.pX=this.x}getRow(){return this.row}setRow(r){this.row=r,this.setX()}setX(){this.x=this.row*c}moveDown(){this.row=this.row+1,this.y=this.y+c,this.animationStep=(this.y-this.pY)/10}moveUp(){this.row=this.row-1,this.y=this.y-c,this.pY=this.y,h.clearRect(this.x,this.y,this.width,this.height)}getCol(){return this.col}getColor(){return this.fillColor}itemClick(r,n){return r>this.x&&r<this.x+c&&n>this.y&&n<this.y+c}setColor(r){this.fillColor=r,this.draw()}update(){this.pY>=this.y-this.animationStep?(h.clearRect(this.x,this.y-this.animationStep,this.width,this.height),this.pY=this.y,h.clearRect(this.x,this.y,this.width,this.height),h.drawImage(C[this.fillColor],this.x,this.y,this.height,this.width)):(h.clearRect(this.x,this.pY,this.width,this.height),this.pY+=this.animationStep,h.drawImage(C[this.fillColor],this.x,this.pY,this.height,this.width))}}function F(){for(let r=0;r<8;r++)for(let n=0;n<8;n++){let e=new A(r*c,n*c,c,c,H(0,C.length-1),n,r);L.push(e)}if(I(L))for(let r of L)r.draw();else L=[],F()}function I(r){for(let n of r)if(E(n).length>=2)return!0;return!1}function H(r,n){return Math.floor(Math.random()*(n-r+1))+r}function E(r){let n=[],e=[],t=[];for(t.push(r),n.push(r),e.push(r);t.length>0;){let r=t.shift();for(let i of L)n.includes(i)||(1==Math.abs(i.getCol()-r.getCol())&&i.getRow()==r.getRow()||1==Math.abs(i.getRow()-r.getRow())&&i.getCol()==r.getCol())&&(n.push(i),i.getColor()==r.getColor()&&(e.push(i),t.push(i)))}return e}function z(){let r=[];for(let n=0;n<L.length-1;n++)null!=L[n].getColor()&&null==L[n+1].getColor()&&L[n+1].getCol()==L[n].getCol()&&n+1<=L.length-1&&r.push(L[n]);return r}v.onload=F;let P=0;function X(){for(let r=L.length-1;r>=0;r--){let n=L[r].getYPosition();n[0]<n[1]&&L[r].update()}P++,P<=10?requestAnimationFrame(X):(P=0,function(){for(let r of L)null==r.getColor()&&setTimeout(r.setColor.bind(r),200,H(0,C.length-1));setTimeout((()=>{k.classList.remove("disabled")}),300),setTimeout((()=>{x<1&&0==I(L)&&(h.save(),requestAnimationFrame(G),x++,T.classList.add("disabled"))}),600)}(),0!==g?T.classList.remove("disabled"):f>=u?(q.innerHTML="Победа!",Y.classList.add("good-glow")):(q.innerHTML="Поражение",Y.classList.add("bad-glow")))}let N=[];function O(){for(let r=N.length-1;r>=0;r--)null!=N[r].getColor()&&N[r].compress();if(P++,P<=10)requestAnimationFrame(O);else{P=0;for(let r=N.length-1;r>=0;r--)N[r].delete();N=[]}}function B(){T.classList.add("disabled");let r=z();for(;r.length>0;){for(let n=0;n<L.length-1;n++)if(null!=L[n].getColor()&&null==L[n+1].getColor()&&L[n+1].getCol()==L[n].getCol()&&n+1<=L.length-1){let e=1;for(r.pop();n+e<=L.length-1&&null==L[n+e].getColor()&&L[n+e].getCol()==L[n].getCol();)L[n].moveDown(),L[n+e].moveUp(),e+=1;let t=L.slice(n,n+e).sort(((r,n)=>r.getRow()-n.getRow()));L.splice(n,e,...t)}r=z()}requestAnimationFrame(X)}function G(){if(h.clearRect(0,0,500,500),P++,P>=60){P=0,K();for(let r of L)r.draw();T.classList.remove("disabled")}else if(P<30){h.translate(0,20);for(let r of L)r.draw();requestAnimationFrame(G)}else if(30==P)K(),requestAnimationFrame(G);else if(P>30){h.translate(0,-20);for(let r of L)r.draw();requestAnimationFrame(G)}}function K(){let r=L.map((r=>[r.getRow(),r.getCol()]));for(let r=L.length-1;r>0;r--){let n=Math.floor(Math.random()*(r+1));[L[r],L[n]]=[L[n],L[r]]}for(let n=0;n<L.length;n++)L[n].setPosition(r[n][0],r[n][1])}p.addEventListener("click",(r=>{let n=function(r){var n=0,e=0,t=p;do{n+=t.offsetLeft-t.scrollLeft,e+=t.offsetTop-t.scrollTop}while(t=t.offsetParent);return[r.pageX-n,r.pageY-e]}(r),e=n[0],t=n[1];for(let r of L)if(r.itemClick(e,t)){if(k.classList.add("disabled"),N=E(r),N.length>=2){for(let r of N);T.classList.add("disabled"),requestAnimationFrame(O),g--,f+=function(r){let n=0;return f>u?n+=30*r:(n=20,r>2&&(n+=20*(r-2))),n}(N.length),d=f/u*100,f>u?(M.innerHTML=f,R.style.width="100%"):(M.innerHTML=f,R.style.width="100%",R.style.width=d+"%"),S.innerHTML=g}setTimeout(B,800)}}));let U=!1;k.onclick=function(){0==U&&(T.classList.add("disabled"),requestAnimationFrame(G),U=!0),k.classList.add("shuffle-disabled")},j.onclick=function(){h.clearRect(0,0,500,500),L=[],u=320,g=6,f=0,x=0,d=0,U=!1,F(),T.classList.remove("disabled"),k.classList.remove("shuffle-disabled"),Y.classList.remove("bad-glow"),Y.classList.remove("good-glow"),q.innerHTML="...",R.style.width="5%",S.innerHTML=g,M.innerHTML=f}})()})();